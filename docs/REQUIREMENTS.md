# 项目需求文档：学习计划日程看板网页

## 一、计划看板的功能

### 1.1 计划展示

#### 1.1.1 时间轴（纵向）
- Y 轴：固定显示每个小时刻度，范围 06:00–23:00。
- 网格：以 30 分钟为最小单位绘制半小时刻度。

#### 1.1.2 时间范围（横向）
- X 轴：支持切换查看日期范围，预设 3 天、7 天、15 天，并支持自定义日期范围。

#### 1.1.3 视图切换
- 提供“时间线视图”和“月视图”两种视图，以满足总览与细化（精确到具体时间段）的不同需求。

### 1.2 任务管理

#### 1.2.1 任务创建
- 在空白区域双击，或点击“+”按钮快速新增任务。
- 任务以圆角矩形块展示。

#### 1.2.2 任务编辑
- 双击任务块，在块内直接编辑任务标题。

#### 1.2.3 任务操作
- 拖拽：在 Y 轴（时间）与 X 轴（日期）方向拖拽移动任务块。
- 复制：按住 Alt/Ctrl 拖拽可复制出新的任务块。
- 删除：选中任务后，点击删除按钮或按 Delete 键删除。
- 冲突提示：当任务时间段发生重叠时，给予视觉提示以标识冲突并避免提交。

#### 1.2.4 任务属性（可选）
- 分类/标签：如“学习”“工作”“运动”等，可自定义标签与颜色。
- 优先级：设置不同优先级，并通过不同颜色或标识区分。
- 备注：可填写任务的详细说明。

#### 1.2.5 时间调整
- 拖拽任务块的上下边缘可修改开始时间或结束时间。

#### 1.2.6 跨天移动
- 将任务块拖拽到相邻日期列即可跨天移动。

#### 1.2.7 任务完成状态
- 支持将任务标记为“已完成/未完成”。
- 用不同的样式（如删除线、颜色深浅、透明度等）进行区分。

### 1.3 导出

#### 1.3.1 导出为图片
- 用户可导出当前视图（如 3 天/7 天）或指定日期范围内的计划视图为 PNG/JPG 图片。
- 导出的图片需保证较高分辨率与清晰度，便于打印与移动端查看。

#### 1.3.2 导出主题
- 支持浅色/深色模式导出，导出的主题与当前页面一致。

### 1.4 账户与登录（简单版）

- 目标：提供简单注册/登录能力，无需邮箱或手机号验证，便于用户在编辑计划表后保存，并可随时登录查看与调整个人计划。
- 注册
  - 支持“用户名 + 密码”注册；邮箱/手机号为可选字段且不做验证。
  - 用户名必须唯一；重名时提示“用户名已存在”。
  - 密码至少 8 位，允许字母/数字/符号。
- 登录
  - 支持“用户名 + 密码”登录。
  - 登录失败统一提示“账号或密码错误”。
  - 记住登录：提供“保持登录”选项（如 7 天），否则默认会话级登录。
  - 退出：提供退出入口，清除本地会话。
- 计划数据
  - 登录后可保存计划表（任务列表、颜色、完成状态、视图模式、天数、锚点日期等偏好）。
  - 保存方式：提供显式“保存”按钮；可选开启“自动保存”（编辑结束后 N 秒触发）。
  - 登录后自动加载最近一次保存的计划；支持随时修改并保存。
  - 数据隔离：每个用户仅可访问自己的计划数据。
- 接口（示例）
  - POST /api/auth/register { username, password }
  - POST /api/auth/login { username, password } -> { token }
  - GET  /api/plan（需鉴权）返回当前用户计划数据
  - PUT  /api/plan（需鉴权）提交并保存当前用户计划数据
- 安全
  - 密码仅以安全哈希（如 bcrypt/scrypt/argon2）存储。
  - 会话可使用 HttpOnly Cookie 或 Bearer Token；Cookie 建议 SameSite=Lax，HTTPS 下启用 Secure。
- 非目标
  - 暂不实现邮箱/手机验证码与找回密码（后续可扩展）。
